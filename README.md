# Imposter Game Box

Веб-игра для компании на Next.js, готовая к деплою на Vercel.

## Что реализовано

- Главная страница с архитектурой под несколько игровых режимов
- Режим #1: `Правда или Фейк`
- Вход без авторизации (имя + код комнаты + опциональный пароль)
- Лобби и контроль хоста:
  - Таймер обсуждения (1-5 минут)
  - Количество импостеров
  - Старт раунда
- Управление обсуждением во время игры:
  - Досрочно завершить обсуждение
  - Продлить обсуждение (+30 сек / +1 мин)
- Полный цикл раунда:
  - Лобби -> Обсуждение -> Голосование -> Результаты
- Уникальная раздача фактов:
  - В каждом раунде каждый игрок получает свой уникальный факт
- Синхронизация комнаты в реальном времени через long polling
- Хранилище комнат:
  - In-memory (локально)
  - Upstash Redis (рекомендуется для продакшена)

## Где хранится база фактов

- Файл: `lib/games/fact-or-fake/facts.ts`
- Тип хранения: пока хардкод в репозитории (без внешней БД)
- Количество фактов: `25`

## Локальный запуск

```bash
npm install
npm run dev
```

Откройте [http://localhost:3000](http://localhost:3000).

## Деплой на Vercel

Для продакшена рекомендуется Redis, иначе состояние комнат будет нестабильным на нескольких инстансах.

Переменные окружения:

- `UPSTASH_REDIS_REST_URL`
- `UPSTASH_REDIS_REST_TOKEN`

## API комнаты

- `POST /api/rooms/create`
- `POST /api/rooms/join`
- `POST /api/rooms/[code]/action`
- `GET /api/rooms/[code]/sync?sessionId=...&since=...`

## Структура проекта

- `app/` - страницы, layout и API роуты
- `components/` - клиентские UI-компоненты
- `lib/shared/` - общие типы
- `lib/games/` - реестр игр и база фактов
- `lib/server/` - игровая логика и хранилище
